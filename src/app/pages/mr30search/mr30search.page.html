<ion-header translucent="true">
    <ion-toolbar>
        <ion-buttons *ngIf="!showSearchbar" slot="start">
            <ion-menu-button></ion-menu-button>
            <ion-back-button id="mr30-back" defaultHref="/"></ion-back-button>
        </ion-buttons>
        <ion-segment *ngIf="ios" [(ngModel)]="segment" (ionChange)="updateSchedule()">
            <ion-segment-button value="all">
                ทั้งหมด
            </ion-segment-button>
            <ion-segment-button value="favorites">
                รายการโปรด ({{sumMR30}})
            </ion-segment-button>
        </ion-segment>
        <ion-title *ngIf="!ios && !showSearchbar">มร. 30</ion-title>
        <ion-searchbar id="searchText" *ngIf="showSearchbar" showCancelButton="always" [(ngModel)]="queryText"
            (ionChange)="filterMr30()" (ionCancel)="showSearchbar = false" placeholder="Search"></ion-searchbar>
        <ion-buttons id="search-btn" slot="end">
            <ion-button   *ngIf="!ios && !showSearchbar" (click)="showSearchbar = true">
                <ion-icon  slot="icon-only" name="search"></ion-icon>
        </ion-button>

        </ion-buttons>
    </ion-toolbar>
    <ion-toolbar *ngIf="!ios">
        <ion-segment [(ngModel)]="segment" (ionChange)="updateSchedule()">
            <ion-segment-button value="all">
                ทั้งหมด 
            </ion-segment-button>
            <ion-segment-button value="favorites">
                รายการโปรด ({{sumMR30}})
            </ion-segment-button>
        </ion-segment>
    </ion-toolbar>
</ion-header>

<!-- <ion-header class="ion-no-border">
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-back-button defaultHref="/"></ion-back-button>
        </ion-buttons>
  
    </ion-toolbar>
  </ion-header> -->


<ion-content fullscreen="true">
    <ion-header collapse="condense">
        <ion-toolbar>
            <ion-title size="large">มร.30</ion-title>
        </ion-toolbar>
        <ion-toolbar>
            <ion-searchbar  id="searchText" [(ngModel)]="queryText" (ionChange)="filterMr30()" placeholder="Search"></ion-searchbar>
        </ion-toolbar>
    </ion-header>

    <!-- <ion-list *ngIf="mr30Arr; else mr30ArrFalse;" #scheduleList [hidden]="shownSessions === 0"> -->
    <ion-list #scheduleList [hidden]="segment != 'all'">
        <ion-item-group  id="mr30-{{mr30Arr.id}}" *ngFor="let mr30Arr of mr30Arr |slice:0:30">
            <ion-item-divider sticky>
                <ion-label class="course_header">
                    {{mr30Arr.course_no}}({{mr30Arr.course_credit}}) 
                </ion-label>
            </ion-item-divider>

            <ion-item-sliding #slidingItem [attr.track]="mr30Arr.day_name_s | lowercase">
            <!-- <ion-item-sliding #slidingItem [attr.track]="pickDateColor(mr30Arr.day_name_s)"> -->

                <ion-item  routerLink="/app/tabs/mr30search/mr30detail/{{mr30Arr  | json }}">
                    <ion-label>
                        <h3>วันเวลาเรียน : {{mr30Arr.day_name_s}} {{mr30Arr.time_period}}</h3>
                        <h3>ห้องเรียน : {{mr30Arr.course_room}}</h3>
                        <h3>อาจารย์ผู้สอน : {{mr30Arr.course_instructor}}</h3>
                        <h3>วันเวลาสอบ : {{mr30Arr.course_examdate}}</h3>
                        <h3 *ngIf="mr30Arr.course_pr!=''">{{mr30Arr.course_pr}}</h3>
                        <h3 *ngIf="mr30Arr.course_comment!=''">หมายเหตุ : {{mr30Arr.course_comment}}</h3>
                    </ion-label>
                </ion-item>
                <ion-item-options>
                    <ion-item-option color="favorite" (click)="addMR30Fav(mr30Arr)"
                        *ngIf="segment === 'all'">
                        เพิ่มรายการโปรด
                    </ion-item-option>
                    <ion-item-option color="danger" (click)="removeFavorite(slidingItem, session, 'Remove Favorite')"
                        *ngIf="segment === 'favorites'">
                        ลบ
                    </ion-item-option>
                </ion-item-options>
            </ion-item-sliding>
        </ion-item-group>
    </ion-list>

    <ion-list [hidden]="segment !='favorites'">
        <ion-item-group *ngFor="let mr30Arr of groupsFav |slice:0:30">
            <ion-item-divider sticky>
                <ion-label class="course_header">
                    {{mr30Arr.course_no}}({{mr30Arr.course_credit}}) 
                </ion-label>
            </ion-item-divider>

            <ion-item-sliding #slidingItem [attr.track]="mr30Arr.day_name_s | lowercase ">

                <ion-item routerLink="/app/tabs/home/mr30search/mr30detail/{{mr30Arr  | json }}">
                    <ion-label>
                        <h3>วันเวลาเรียน : {{mr30Arr.day_name_s}} {{mr30Arr.time_period}}</h3>
                        <h3>ห้องเรียน : {{mr30Arr.course_room}}</h3>
                        <h3>อาจารย์ผู้สอน : {{mr30Arr.course_instructor}}</h3>
                        <h3>วันเวลาสอบ : {{mr30Arr.course_examdate}}</h3>
                        <h3 *ngIf="mr30Arr.course_pr!=''">{{mr30Arr.course_pr}}</h3>
                        <h3 *ngIf="mr30Arr.course_comment!=''">หมายเหตุ : {{mr30Arr.course_comment}}</h3>
                    </ion-label>
                </ion-item>
                <ion-item-options>
                    <ion-item-option color="favorite" (click)="addMR30Fav(mr30Arr)"
                        *ngIf="segment === 'all'">
                        เพิ่มรายการโปรด
                    </ion-item-option>
                    <ion-item-option color="danger" (click)="removeFavMR30(mr30Arr.id)"
                        *ngIf="segment === 'favorites'">
                        ลบ
                    </ion-item-option>
                </ion-item-options>
            </ion-item-sliding>
        </ion-item-group>
    </ion-list>
    <!-- <ion-item-group #mr30ArrFalse>
        <ion-item-divider sticky>
            <ion-label class="course_header_not_found">
                 ไม่พบรหัสวิชาที่คุณต้องการค้นหา
            </ion-label>
        </ion-item-divider>
    </ion-item-group> -->

</ion-content>